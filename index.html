<!DOCTYPE html>
<html lang="zh">
<head>
<title>焦糖black </title>
<!-- <script type="text/javascript" src="javascript.js"></script>   -->
<meta charset="UTF-8">
<meta name="description" content="（Bilibili,哔哩哔哩,B站）唱见 焦糖Black的歌单">
 <meta name="keywords" content="焦糖Black,流行,唱见,B站,Bilibili,bili,直播,唱歌,高音,华晨宇,林俊杰,哔哩哔哩直播,唱见直播,热门直播,B站直播,唱见电台,实力,歌单,焦糖black歌单,老糖的不完全歌单,live.bilibili.com/5607874,5607874">
 <meta name="author" content="来份考拉刨冰么">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">

 <link rel="stylesheet" href="styles.css">
 <link rel="shortcut icon" type="image/x-icon" href="disco-ball.png" />
</head>






<body>

<!---------------------- header ------------------------------------->


<div class="header">
  <a class="logo">老糖的不完全歌单</a>
  <a class="logo" id="liveSchedule" href='https://live.bilibili.com/5607874' target='blank'></a>

  <div class="header-right">
    <a class="active" href="index.html">歌单</a>
    <a href="live.html">直播</a>
  </div>

</div>




<!---------------------------- 新添加的歌们 ---------------------------->

<div id = "newContainer">
	<H3>✨ 新添加的歌们 ✨</H3>
	<div id = "new"></div>
</div>

<div id = "mainContainer">
	<div id= "songListContainer">
<!---------------------------- buttons ---------------------------->

		<p id="suisuinian">歌单还非常不完整，如果发现遗漏歌请戳我~~万分感谢！</p>
		
		<div id = "buttons">
			<div class="alignMiddle">
				<button class="tab" onclick="sortByTitle();setContent();"> 歌名 </button>
				<button class="tab" onclick="setContentSinger(simplifySinger());"> 歌手 </button>
			</div>
			<div class="alignMiddle">
				<input id="search" placeholder="歌名 or 歌手名"></input>
				<button onclick="search();" id = "submit">搜索</button>
			</div>
		</div>



<!---------------------------- 主体 ---------------------------->	


		<div id = "songList"></div>


	</div>

 <!---------------------------- 待添加列表 ---------------------------->	
	<!--<div id = "pendingContainer">
		<H3>发现遗漏的歌？</H3>
		<p>这里添加的歌会暂时添加到下面的待添加歌单里，会尽快添加到右边的歌单里哒</p>
		<div id ="leftInputGroup">
			<input id="pendingSongTitle" placeholder = "歌名" minlength = "1" maxlength ="15"></input>
			<input id="pendingSongArtist" placeholder = "歌手" minlength = "1" maxlength ="15"></input>
			<button id="addToPending" onclick="addToPending()">添加</button>
		</div>
	
		
		<H3>待添加的歌单</H3>

		<div id = "pendingSongList">暂时还没有待添加的歌曲~</div>

		
	</div>

</div> -->


<!---------------------------- footer ---------------------------->	

<footer>
	<p id="footer">@考拉 2018 🚀悄咪咪祝老糖快点火火火~！</p>
	<button id="copy" onclick="magic();">给老糖的魔法摁扭</button>
</footer>




<!----------------------------  js  ---------------------------->

<script>

	var divider = " — ";//网站上显示的分隔符

//////////////////////////////////回车搜索//////////////////////////////////////
	var input = document.getElementById("search");

			input.addEventListener("keyup", function(event) {
  			// Cancel the default action, if needed
  				event.preventDefault();
 				 // Number 13 is the "Enter" key on the keyboard
 				 if (event.keyCode === 13) {
    // Trigger the button element with a click
   					 document.getElementById("submit").click();
 					 }
			});




////////////////////////////////////////// 歌单 ///////////////////////////////////////////
//格式 落叶归根-王力宏
//新歌加在最前面方便到时候显示新添加歌曲
//没找到歌手名的话也要填，不能空着

	var str = "你要的爱-戴佩妮,Let you go-牛奶咖啡,光年之外-邓紫棋,无问-毛不易,明月天涯-五音JW,唐人-孙子涵,别回答-酷爱乐团,云烟成雨-房东的猫,我以为-品冠,握不住的他-林俊杰,残废-吴克群,临时演员-黄渤,天后-陈势安,天黑-阿杜,拥有-李泉,美妙生活-林宥嘉,不屑纪念-吴克群,神通-曾一鸣,I Like You-满舒克,寄生-吴克群,好好-五月天,星空-五月天,拥抱-五月天,少年他的奇幻漂流-五月天,你不像她-南拳妈妈,王子的新衣-萧敬腾,离开地球表面-五月天,剪云者-林俊杰,鱼仔-卢广仲,肆无忌惮-薛之谦,圣所-林俊杰,小瓶子-林俊杰,往后余生-何小渝or马良,量身定做-张杰,兰花指-阿里郎,疑心病-曾昱嘉,天梯-C AllStar,落叶归根-王力宏,最美的期待-周笔畅,斑马斑马-宋冬野,幻听-许嵩,云长-赵钶,撒野-欸61,夜夜夜夜-齐秦,Lemon-米津玄师,阿楚姑娘-袁娅维,背叛-曹格,横冲直撞-华晨宇,幸运大门-郭顶,你要的全拿走-胡彦斌,春泥-庾澄庆,让我留在你身边-陈奕迅,野子-苏运莹,我们的歌-王力宏,简简单单-林俊杰,她来听我的演唱会-张学友,我真的受伤了-张学友,一次就好-杨宗纬,爱你没差-周杰伦,浪费-林宥嘉,我们的明天-鹿晗,复制人-萧敬腾,男孩-梁博,对不起我还爱你-回音哥,爱情废柴-周杰伦,阴天快乐-陈奕迅,雨下一整晚-周杰伦,我又想你了-陈信喆,会长大的幸福-Tank,爱很简单-陶喆,人质-杨宗纬,默-那英,灵魂的共鸣-林俊杰,海啸-庾澄庆,婚礼的祝福-陈奕迅,飞云之下-林俊杰&韩红,对不起谢谢-陈奕迅,你就不要想起我-田馥甄,血腥爱情故事-张惠妹,如果不是-杨炅翰,黄昏-周传雄,非你莫属-Tank,黑色柳丁-陶喆,笑忘书-王菲,流着泪说分手-金志文,听-张杰,我不配-周杰伦,眼鼻口-Taeyang太阳,你要的不是我-林俊杰,就是爱你-陶喆,假面-光泽,If You-Big Bang,不存在的情人-林俊杰,不要说话-陈奕迅,夜访吸血鬼-五月天,手写的从前-周杰伦,杀手-林俊杰,天真有邪-林宥嘉,后来的我们-五月天,我我-石常磊,量身定做-张杰,圣诞结-陈奕迅,等一个人-林芯仪,和你-余佳运,你的配角-回音哥,转动-林俊杰,翅膀-林俊杰,裂心-王力宏,还爱着你-郭采洁,搁浅-周杰伦,爱你-陈芳语,陷阱-王北车,陪你度过漫长岁月-陈奕迅,思念是一种病-张震岳,三生三世-张杰,天下-张杰,趁早-张宇,菊花台-周杰伦,迷迭香-周杰伦,全世界失眠-范玮琪,情歌两三首-郭顶,K歌之王-陈奕迅,到不了-范玮琪,每个人都会-方大同,今天你要嫁给我-陶喆,找自己-陶喆,记得-林俊杰,我-张国荣,浪漫血液-林俊杰,心墙-林俊杰,成都-赵雷,学不会-林俊杰,背对背拥抱-林俊杰,关键词-林俊杰,曹操-林俊杰,黑暗骑士-林俊杰,小酒窝-林俊杰,因你而在-林俊杰,她说-林俊杰,爱笑的眼睛-林俊杰,黑夜问白天-林俊杰,可惜没如果-林俊杰,那些你很冒险的梦-林俊杰,醉赤壁-林俊杰,修炼爱情-林俊杰,输了你赢了世界又如何-林俊杰,Always online-林俊杰,普通朋友-陶喆,如果分开我也爱你-关喆,造物者-华晨宇,世界末日-周杰伦,玫瑰花的葬礼-许嵩,夜曲-周杰伦,Love Song-方大同,I AM-林俊杰,死结-李玖哲,其实-薛之谦,When I Was Your Man-Bruno Mars,偏爱-张芸京,吃泡面-曹寅,说谎-林宥嘉,全世界谁倾听你-林宥嘉,傻子-林宥嘉,江南-林俊杰,三天两夜-张学友,生生-林俊杰,浮生-刘莱斯,成全-刘若英,国境四方-RaJor,讲真的-曾惜,晴天-周杰伦,梦一场-那英,百万个吻-陈明真,我是你的谁-黄立行,烟火里的尘埃-华晨宇,Here We Are-华晨宇,我的滑板鞋-华晨宇,我们都是孤独的-华晨宇,平凡之路-华晨宇,齐天大圣-华晨宇,我管你-华晨宇,微光-华晨宇,蜉蝣-华晨宇,无聊人-华晨宇,智商二百五-华晨宇,代号魂斗罗-华晨宇,爱情转移-陈奕迅,你的背包-陈奕迅,不为谁而作的歌-林俊杰,不潮不用花钱-林俊杰,红色高跟鞋-蔡健雅,当你-林俊杰,芊芊-回音哥,故梦-橙翼,大浪淘沙-玄觞,忘川-小曲儿,最美的太阳-张杰,知足-五月天,最近-李圣杰,自由-张震岳,追梦赤子心-GALA乐队,一个人一座城-曹寅,演员-薛之谦,丑八怪-薛之谦,永不失联的爱-周兴哲,易燃易爆炸-陈粒,想自由-林宥嘉,喜剧之王-李荣浩,学猫叫-小峰峰,想你的夜-关喆,需要人陪-王力宏,想太多-李玖哲,夏洛特烦恼-金志文,我好想你-苏打绿,我喜欢上你时的内心活动-陈绮贞,悟空-戴荃,我想大声告诉你-樊凡,我们的爱-F.I.R,王妃-萧敬腾,我的歌声里-曲婉婷,停格-蔡健雅,特别的人-方大同,体面-于文文,太早-刘允乐,说好的幸福呢-周杰伦,三人游-方大同,神秘嘉宾-林宥嘉,十年-陈奕迅,死了都要爱-信乐团,上瘾-光泽,水星记-郭顶,算什么男人-周杰伦,谁-廖俊涛,如果你能感同我的身受-BC221,其实都没有-杨宗纬,齐天-华晨宇,男人KTV-胡彦斌,你好不好？-周兴哲,你不是真正的快乐-五月天,你的背包-陈奕迅,内疚-陈奕迅,你不知道的事-王力宏,摩天大楼-薛之谦,慢慢-张学友,慢慢喜欢你-莫文蔚,骆驼-薛之谦,恋爱ing-五月天,李白-李荣浩,离人愁-李袁杰,离人-林志炫,夸张-周品,可能否-小木雅,空白格-蔡健雅,离歌-信乐团,空心-光泽,空空如也-任然,开到荼蘼-王菲,骄傲的少年-南征北战,虎口脱险-老狼,我好想你-苏打绿,会痛的石头-萧敬腾,动物世界-薛之谦,过火-张信哲,第三人称-HUSH,出卖-那英,宠爱-TFBOYS,不搭-李荣浩,飙高音-黄明志,不找了-郭旭,不将就-李荣浩,不等你-苟乃鹏,被驯服的象-蔡健雅,保留-郭顶,阿飞的小蝴蝶-萧敬腾,天空之城-李志,戒烟-李荣浩,刚刚好-薛之谦,关不掉的月光-庾澄庆,爱我还是他-陶喆,来不及-刘瑞琦,心中的日月-王力宏,会说话的哑巴-李代沫,我可以-蔡旻佑,别怕我伤心-张信哲,爱如潮水-张信哲,遗憾-李代沫,阳光宅男-周杰伦,牛仔很忙-周杰伦";





			
	///////////////////////////////////// 分割为array ////////////////////////////////////////

	var arr = str.split(',');
	

	//////////////////////////////////// 显示最新的歌 ///////////////////////////////////////

	var newSongs = "";
	for(i = 0 ; i < 9; i ++){
		newSongs +=  arr[i].split('-')[0] + divider + arr[i].split('-')[1] + " · "  ;
	}

	document.getElementById("new").innerHTML = newSongs;


	//////////////////////////////////// pending ///////////////////////////////////////
	var pendingList = [];





	////////////////////////////////////// 按歌手排序 //////////////////////////////////////////
	
	function sortBySinger(){

		arr = arr.sort(function(a,b){
			
		 	return a.toString().split('-')[1].localeCompare(b.toString().split('-')[1],'zh-CN')
		 });
	}
		



	////////////////////////////////////// 按歌名排序 ///////////////////////////////////////////

	function sortByTitle(){
		
		arr.sort(function(a,b){
			
		 	return a.localeCompare(b,'zh-CN')
		 });
	};



	///////////////////////////////////// 改变歌单内容 /////////////////////////////////////////

	function setContent() {
		
		var length = arr.length;
		var arrToStr = "";
		var temp = "";
		var letter;
		
		var segList = pySegSort(arr).slice();
		
		//整个list ：segList
		//a里的内容 ： segList[0].data
		//a里的第一首歌： segList[0].data[0]


		for(i = 0; i < segList.length; i ++){
			// console.log("i : " + i + " letter : " + segList[i].letter);
			
	
			letter = segList[i].letter.toUpperCase();
			// console.log("segList[i] = " + segList[i].data);
			arrToStr += "<p style=\"font-size:17px; color:pink; background-color: #f2f2f2; width:23px; font-weight:bold;border-radius:4px; text-align:center; \">" + letter + "</p>" ;
			// temp = segList[i].data;

			segList[i].data.forEach(function(arr){
				temp += arr.split('-')[0] + divider + arr.split('-')[1] + "<br>";

			});

			arrToStr += temp + "<br>";
			temp = "";	
		};
		// console.log("arrToStr = " + arrToStr);
		
  
		// temptitle = arr.toString().split('-')[0];
		// // console.log("temptitle = " + temptitle);
		// tempsinger = arr.toString().split('-')[1];
		// arrToStr += temptitle + divider +  "<b>" + tempsinger + "</b>" +  "<br>";

		// });
			////////////////////////////////////////////////


		// arr.forEach(function(arr){
  
		// temptitle = arr.toString().split('-')[0];
		// // console.log("temptitle = " + temptitle);
		// tempsinger = arr.toString().split('-')[1];
		// arrToStr += temptitle + divider +  "<b>" + tempsinger + "</b>" +  "<br>";

		// });

		document.getElementById("songList").innerHTML = arrToStr;
	}


	////////////////////////////////////// 简化歌手 ///////////////////////////////////////////



	function simplifySinger() {

		sortBySinger();
		var sortedBySinger = arr.slice();
		var str = [];
		

		for ( i = 0; i < sortedBySinger.length; i ++){

			var singerStr = sortedBySinger[i].toString().split('-')[1];

			if (i + 1 < sortedBySinger.length){
				var nextSingerStr = sortedBySinger[i+1].toString().split('-')[1];
			}


			if(str.toString().includes(singerStr) == true){ //如果歌手已经在array里

				str[i] = "";

				if(str.toString().includes(nextSingerStr) == false){
					titleStr = sortedBySinger[i].split('-')[0].toString();
				}else{
					titleStr = sortedBySinger[i].split('-')[0].toString() + "  丶  ";
				}

				str[i] += titleStr;

				
				
			}else{ //如果歌手不在array里

				if ( i == 0 ){
					str.push("<p style=\"font-size:13px; color:pink; background-color: #f2f2f2; height:25px; width:100px;padding:6px; display:inline-block;font-weight:bold;border-radius:4px; \">" + singerStr + " </p>" ); //加入str 没有回车 
				}else{
					str.push("<br><p style=\"font-size:13px; color:pink; background-color: #f2f2f2; height:25px; width:100px;padding:6px; display:inline-block;font-weight:bold;border-radius:4px; \">" + singerStr + " </p>" ); //加入str 回车~
				}

				if(str.toString().includes(nextSingerStr) == false){
					titleStr = sortedBySinger[i].split('-')[0].toString();
				}else{
					titleStr = sortedBySinger[i].split('-')[0].toString() + "  丶  " ;
				}

				str[i] +=  "<br>" + titleStr + "  ";

			}
		}
		return str;
	}
	


	///////////////////////////////////// 简化显示歌手 ////////////////////////////////////////


		function setContentSinger(str) {
		
			var length = str.length;
			var arrToStr = "";
		
			for (var i = 0; i <= length; i ++){
			 
			 	arrToStr += str[i];

			}
	
		document.getElementById("songList").innerHTML = arrToStr;
		
		}


////////////////////////////////////// 搜索 ///////////////////////////////////////////


		function search() {
			
			var str = "";
			var keywords = "";
			keywords = document.getElementById("search").value.toLowerCase();
			
			var alert = "";
			var singerStr = "";
			var titleStr = "";

			console.log(keywords);



			if(keywords == ""){
				window.alert("请输入关键字~");
				return;
			}
 

			arr.forEach(function(arr){
				titleStr = arr.split('-')[0];
				_titleStr = arr.split('-')[0].toLowerCase();
				singerStr = arr.split('-')[1];
				_singerStr = arr.split('-')[1].toLowerCase();
				str += arr.toString();
				if(_titleStr.includes(keywords) == true || _singerStr.includes(keywords) == true){
					alert += titleStr + " — " + singerStr+ "\n";

				}

		});

			if(str.toString().toLowerCase().includes(keywords.toString().toLowerCase()) != true){ 
					
					alert = "木有找到诶 QAQ \n有可能是忘了加上！快去问问老糖会不会唱~"
					
				}
			window.alert(alert);
			
	}



//////////////////////////////// 添加歌曲到pending list //////////////////////////////////////

	function addToPending(){

		var pendingSongTitle = document.getElementById("pendingSongTitle").value;
		var pendingSongArtist = document.getElementById("pendingSongArtist").value;
		

		if(pendingSongArtist == "" || pendingSongTitle == "" ){
			alert("呀！歌名和歌手都要输入噢！");
			return;
		}
		console.log(str);
		console.log("pendingSongTitle = " + pendingSongTitle);
		console.log("pendingSongArtist = " + pendingSongArtist);


		if(pendingList.toString().includes(pendingSongTitle + "-" + pendingSongArtist) == true){
			alert("呀！这首歌已经在[待添加歌单]里了哟~！");
			return;
		}



		if(arr.includes(pendingSongTitle + "-" + pendingSongArtist) == true){
			alert("呀！这首歌已经在[歌单]里了哟~！");

		}else{

		pendingList.push(pendingSongTitle + "-" + pendingSongArtist);

		alert("添加成功啦~！万分感谢！");

		document.getElementById("pendingSongList").innerHTML = pendingList ;
		
	}

}


///////////////////////////////给老糖的魔法按钮/////////////////////////////

	function magic(){
		var temptitle = "";
		var title ="";
		var i = 0;
		var length = arr.length;
		var segList = pySegSort(arr);
		var letter = "";

		for(i = 0; i < segList.length; i ++){
			// console.log("i : " + i + " letter : " + segList[i].letter);

			
			letter = segList[i].letter.toUpperCase();
			title += "<p style=\"font-size:17px; color:#333333; background-color: #f2f2f2; width:20px; font-weight:bold; display: inline-block; padding: 0px 5px; margin-right:5px; text-align:center;  \">" + letter  +"</p>" ;
			// temptitle = segList[i].data;

			var idx = 0 ;

			segList[i].data.forEach(function(arr){
				console.log("idx = " + idx);
				console.log("segList[i].data = " + segList[i].data );
				console.log("arr.length = " + segList[i].data.length );
				if(idx === segList[i].data.length - 1){
					temptitle += arr.split('-')[0];
					console.log("idx === 最后一个" );


				}else{
					temptitle += arr.split('-')[0] + " 、 " ;
					idx ++;
				}
			});

			title+=temptitle + "<br>";
			temptitle = "";
			

				
		};
		


  // 	arr.forEach(function(arr){

  // 		console.log(i);

  // 		if(i < length - 1){
		// temptitle = arr.toString().split('-')[0];
		
		// 	title += temptitle +  " 、 ";
		// 	i++;
		// }else{
  // 			temptitle = arr.toString().split('-')[0];
		//     title += temptitle;
		//     console.log("last one!!!!!!!");
		// }



		// });


  	var text = "<div style=\"overflow: auto; height: 171px; width: 100%; background-color: #333333; color: #f2f2f2; font-size: 13px; margin: auto; padding: 0px 20px; line-height: 1.5;opacity:0.9;\"><p style=\"color: #333333; background-color: #f2f2f2; font-size: 15px; padding-left: 20px; display:block; width:180px;\"><strong>❤&nbsp;歌单持续更新中&hellip;&hellip;</strong></p>" + title +"</div>\
<p><img style=\"height: 80px; margin: auto; display: block;\" src=\"https://i0.hdslb.com/bfs/face/ab805e58ea92ec4aa84e6c734afb332cd3340c87.jpg@100Q.webp@128w_128h_100Q_1c.webp\" /></p>\
<p style=\"text-align: center;\">感谢大家的陪伴 &gt; &lt;</p><p style=\"text-align: center; font-size: 11px;\">欢迎加群 665380472</p>";




    var dummy = document.createElement("input");
    document.body.appendChild(dummy);
    dummy.setAttribute('value', text);
    dummy.select();
    document.execCommand("copy");
    document.body.removeChild(dummy);
    alert("复制成功惹~");

}

  

////////////////////////按拼音首字母分类///////////////////////////

function pySegSort(arr) {
    if(!String.prototype.localeCompare)
        return null;
     
    var letters = "*abcdefghjklmnopqrstwxyz".split('');
    var zh = "阿八嚓哒妸发旮哈讥咔垃麻拏噢妑七呥扨它穵夕丫帀".split('');
     
    var segs = [];
    var curr;
    letters.forEach(function(item,i){
        curr = {letter: item, data:[]};
        arr.forEach(function(item2){
            if((!zh[i-1] || zh[i-1].localeCompare(item2) <= 0) && item2.localeCompare(zh[i]) == -1) {
                curr.data.push(item2);
            }
        });
        if(curr.data.length) {
            segs.push(curr);
            curr.data.sort(function(a,b){
                return a.localeCompare(b);
            });
        }
    });
    return segs;
}



///////////////////////直播时间////////////////////////////////////

function getSchedule(){
	var date = new Date();
	var dayNum = date.getDay();
	var day = "";
	var liveTime = "";
	var result = "";
	console.log(day);

	switch(dayNum) {
	    case 0:
	        day = "星期天";
	        liveTime = "下午4点直播~";
	        break;

	    case 1:
	        day = "星期一";
	        liveTime = "休息噢~~明天见下午4点见~！";
	        break;

	    case 2:
	        day = "星期二";
	        liveTime = "下午4点直播~";
	        break;

	    case 3:
	        day = "星期三";
	        liveTime = "早上9点 & 下午4点都有直播噢~";
	        break;

	    case 4:
	        day = "星期四";
	        liveTime = "下午4点直播~晚上10点半随缘!";
	        break;

	    case 5:
	        day = "星期五";
	        liveTime = "早上9点 & 下午4点都有直播噢~";
	        break;

	    case 6:
	        day = "星期六";
	        liveTime = "下午4点直播~晚上10点半随缘!";
	        break;
	   
	}

	result = "今天" + day + "！" + liveTime;



	return result;



}

function setSchedule(){
	var sche = getSchedule();
	document.getElementById("liveSchedule").innerHTML = sche;
}


	////////////////////////////////////// onLoad ///////////////////////////////////////////


	window.onLoad = sortByTitle();setContent();setSchedule();//网页打开就以歌名A-Z的排序显示

</script>



</body>
</html>